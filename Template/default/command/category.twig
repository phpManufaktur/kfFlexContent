{#
  flexContent

  @author Team phpManufaktur <team@phpmanufaktur.de>
  @link https://kit2.phpmanufaktur.de
  @link https://github.com/phpManufaktur/kitFramework/wiki
  @copyright 2014 Ralf Hertsch <ralf.hertsch@phpmanufaktur.de>
  @license MIT License (MIT) http://www.opensource.org/licenses/MIT
#}
{% spaceless %}
{% include '@phpManufaktur/flexContent/Template/default/command/command.header.twig' %}        
<div class="flexcontent-container">
  <div class="container">    
      
    {{ basic.alert }}

    {% if parameter.category_description and category.category_description|length > 0 %}
      <div class="media">
        {% if parameter.category_image and category.category_image|length > 0 %}
          {% set img = image(category.category_image, parameter.category_image_max_width, parameter.category_image_max_height) %}
          <img class="media-object pull-right img-thumbnail" src="{{ img.src }}" width="{{ img.width }}" height="{{ img.height }}" alt="{{ category.category_name }}" title="{{ category.category_name }}" />
        {% endif %}
        <div class="media-body">
          {% if parameter.category_name %}
            <h{{ parameter.title_level|default('1') }} class="media-heading">{{ category.category_name|default('') }}</h{{ parameter.title_level|default('1') }}>
          {% endif %}
          {{ category.category_description|default('') }}
        </div>
      </div>
    {% elseif parameter.category_name %}
      <h{{ parameter.title_level|default('1') }}>{{ category.category_name|default('') }}</h{{ parameter.title_level|default('1') }}>
    {% endif %}
      
    {# loop only if active contens available ... #}  
    {% if contents.0.content is defined %}
      {% for content in contents %}
        {% if content.redirect_url|length > 0 %}
          {% set url = content.redirect_url %}
          {% set target = content.redirect_target %}
        {% else %}
          {% set url = permalink_base_url ~ '/' ~ content.permalink %}
          {% set target = '_self' %}
        {% endif %}   
        {% if loop.index == 1 %}<div class="row">{% endif %}
        {% if loop.index < 3 %}  
          {# expose the first two items in columns #}
          {% include '@phpManufaktur/flexContent/Template/default/command/content.exposed.twig' %}
        {% endif %}
        {% if loop.index == 2 %}</div>{% endif %}
        {% if loop.index > 2 %}
          {# show all other content items in a smaller list #}
          {% include '@phpManufaktur/flexContent/Template/default/command/content.item.twig' %}
        {% endif %}
      {% endfor %}
      {# if we have only one exposed content we must close the row here ... #}
      {% if contents|length < 2 %}</div>{% endif %}
    {% endif %}  
  </div>
  
</div>
{% include '@phpManufaktur/flexContent/Template/default/command/command.footer.twig' %}        
{% endspaceless %}